# RabbitMQ的学习二

##### 一.RabbitMQ消息交换的关键

```java
1.AMQP协议直接定义了RabbitMQ的内部结构和外部行为
2.使用RabbitMQ本质上就是在使用AMQP
3.AMQP协议被多种消息中间件使用，可以举一反三
```

##### 二.消息流转流程

```java
1.发送者不能直接将消息发给最终队列，必须发送给交换机
2.消息根据路由规则，消息由交换机转发给队列
3.消费者是从队列中将消息取走的
```

##### 三.合理的交换机和队列设置

```java
1.交换机数量不能过多，一般来说同一个业务，或者同一类业务使用同一个交换机
2.合理设置队列数量，一般来说一个微服务监听一个队列，或者一个微服务的一个业务监听一个队列
3.合理配置交换机类型，使用Topic模式时仔细设置绑定建（Routing Key 和 Binding Key）
```

##### 四.尽量使用自动化配置

```java
1.将创建交换机/队列的操作固化在应用代码中，免去复杂的运维操作，高效且不易出错
2.一般来说，交换机由双方同时声明，队列由接收方声明并配置绑定关系
3.交换机/队列的参数一定要由双方开发团队确认，否则重复声明时，若参数不一致，会导致声明失败
```

##### 五.微服务架构

```java
1.概念:将应用程序构建为松耦合、可独立部署的一组服务
2.服务:一个单一的、可独立部署的软件组件，实现了一些有用的功能
3.松耦合:封装服务的实现细节，通过API调用
```

##### 六.微服务的拆分

```java
1.根据系统操作进行微服务的拆分
2.根据业务能力进行微服务的拆分（推荐使用）
3.根据子域进行微服务的拆分
```

##### 七.微服务的数据库设计原则

```java
1.每个微服务使用自己的数据库
2.不要使用共享数据库的方式进行通信
3.不要使用外键，对于数据量非常少的表慎用索引
4.使用rest风格的接口
```

##### 八.REST风格接口

```
1.
```

